(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{302:function(s,a,t){"use strict";t.r(a);var e=t(18),n=Object(e.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mac"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac","aria-hidden":"true"}},[s._v("#")]),s._v(" Mac")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("值得买Mac的理由很多，最重要的一点是要舍得。")]),s._v(" "),t("h2",{attrs:{id:"用touch-id授权sudo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用touch-id授权sudo","aria-hidden":"true"}},[s._v("#")]),s._v(" 用Touch ID授权sudo")]),s._v(" "),t("p",[s._v("使用新版的Macbook或pro都是支持Touch ID，然鹅每次以非root身份执行"),t("code",[s._v("sudo")]),s._v("时，都必须输入密码。这种操作对于配备Touch ID的MacBook Pro用户肯定多少有些不爽的")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".bak"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2s/^/auth       sufficient     pam_tid.so\\'$'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("n/g' /etc/pam.d/sudo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("命令说明")]),s._v(" "),t("p",[s._v("该命令的作用是把 /etc/pam.d/sudo 备份为 /etc/pam.d/sudo.bak，然后在 /etc/pam.d/sudo 的第二行前面加入 auth sufficient pam_tid.so 这个字符串。")]),s._v(" "),t("p",[s._v("pam_tid.so就是支持touch_id的库，如果你学习过linux的认证的PAM框架，你就很容易理解。\n修改该文件的目的是在 sudo 程序的认证过程前面插入 Touch ID 验证的模块。感兴趣的小伙伴可以去了解一下 PAM 架构。")]),s._v(" "),t("p",[s._v("如果需要恢复原文件，请执行")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/pam.d/sudo.bak /etc/pam.d/sudo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("p",[s._v("设置完，自带的终端可以使用Touch ID授权了\n"),t("img",{attrs:{src:"/Mac/shellpam.png",alt:"终端"}}),s._v("\n但是iTerm2还是没有生效，好，我们看下iTerm2的设置 iTerm2 > preferences > advanced，我们搜索下有没有sudo\n"),t("img",{attrs:{src:"/Mac/iTerm2_search_sudo.png",alt:"搜索sudo"}}),s._v("\n我们改成"),t("code",[s._v("no")]),s._v("重启iTerm2，果然生效了。\n"),t("img",{attrs:{src:"/Mac/iTerm2pam.png",alt:"搜索sudo"}})])])},[],!1,null,null,null);a.default=n.exports}}]);